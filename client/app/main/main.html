<header class="hero-unit" id="banner">
</header>

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">KANDOR</h1>
        <ul class="nav nav-pills">
          <li role="presentation" ng-class="$ctrl.selected_algorithm=='baseline' ? 'active' : ''" data-toggle="tab" ng-click="$ctrl.refreshClusters('baseline')"><a href="#">Similaridade Social</a></li>
          <li role="presentation" ng-class="$ctrl.selected_algorithm=='category' ? 'active' : ''" data-toggle="tab" ng-click="$ctrl.refreshClusters('category')"><a href="#">Diversidade de Usuários</a></li>
          <li role="presentation" ng-class="$ctrl.selected_algorithm=='social_popularity' ? 'active' : ''" data-toggle="tab" ng-click="$ctrl.refreshClusters('social_popularity')"><a href="#">Popularidade</a></li>
          <li role="presentation" ng-class="$ctrl.selected_algorithm=='rating' ? 'active' : ''" data-toggle="tab" ng-click="$ctrl.refreshClusters('rating')"><a href="#">Avaliação</a></li>
          <li role="presentation" ng-class="$ctrl.selected_algorithm=='popular_times' ? 'active' : ''" data-toggle="tab" ng-click="$ctrl.refreshClusters('popular_times')"><a href="#">Horários de Pico</a></li>
        </ul>
        <div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSDE6HlmoYd9x1_ZUXRsON-jiiUUto_k4">
          <ng-map id="map" center="-30.034647,-51.217658" zoom="10">
            <!--marker name="circle" ng-if="query.cluster_id != ''" on-click="$ctrl.triggerClusterPolygon(marker.cluster_id, $ctrl)" ng-repeat="marker in $ctrl.markers | filter: query.cluster_id:true" 
              no-watcher="true"
              position="{{marker.position}}"
              title="{{marker.name}}"
              icon="{path: 'CIRCLE', scale: 2, strokeColor:'{{marker.color}}', strokeOpacity:0.8, strokeWeight:2, fillColor:'{marker.color}}', fillOpacity:0.35}">
            </marker-->
            <!--marker ng-if="query.cluster_id == ''" on-click="$ctrl.triggerClusterPolygon(marker.cluster_id, $ctrl)" ng-repeat="marker in $ctrl.markers" 
              no-watcher="true"
              position="{{marker.position}}"
              title="{{marker.name}}"
              icon="{path: 'CIRCLE', scale: 2, strokeColor:'{marker.color}}', strokeOpacity:0.8, strokeWeight:2, fillColor:'{marker.color}}', fillOpacity:0.35}">
            </marker-->
            <marker ng-if="query.cluster_id != ''" on-click="$ctrl.triggerClusterPolygon(marker.cluster_id, $ctrl)" ng-repeat="marker in $ctrl.markers | filter: query.cluster_id:true" position="{{ marker.position }}" title="{{ marker.name }}" icon="{{ marker.icon }}"></marker>
            <marker ng-if="query.cluster_id == ''" on-click="$ctrl.triggerClusterPolygon(marker.cluster_id, $ctrl)" ng-repeat="marker in $ctrl.markers" position="{{ marker.position }}" title="{{ marker.name }}" icon="{{ marker.icon }}"></marker>
            <shape ng-if="$ctrl.cluster_polygon_array.length > 0" name="polygon" 
              paths="{{ $ctrl.cluster_polygon_array }}"
              stroke-color="#FF0000"
              stroke-opacity="0.8"
              stroke-weight="2"
              fill-color="#FF0000"
              fill-opacity="0.35">
            </shape>
            <shape ng-if="$ctrl.neighborhood_polygon_array.length > 0" name="polygon" 
              paths="{{ $ctrl.neighborhood_polygon_array }}"
              stroke-color="#0000FF"
              stroke-opacity="0.3"
              stroke-weight="2"
              fill-color="#0000FF"
              fill-opacity="0.10">
            </shape>
          </ng-map>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6" id="cluster_data">
        <table class="table">
          <thead>
            <tr>
              <th>Metric</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr class="active">
              <td>Média de Checkins</td>
              <td>{{$ctrl.selected_cluster.meta_data.checkin_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='category' ? 'active' : ''">
              <td>Média de Usuários</td>
              <td>{{$ctrl.selected_cluster.meta_data.unique_users_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='rating' ? 'active' : ''">
              <td>Média de Notas de Avaliações</td>
              <td>{{$ctrl.selected_cluster.meta_data.rating_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='rating' ? 'active' : ''">
              <td>Média de Notas Somadas de Avaliações</td>
              <td>{{$ctrl.selected_cluster.meta_data.total_rating_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='rating' ? 'active' : ''">
              <td>Média de Avaliações</td>
              <td>{{$ctrl.selected_cluster.meta_data.review_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='social_popularity' ? 'active' : ''">
              <td>Média de Likes</td>
              <td>{{$ctrl.selected_cluster.meta_data.like_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='social_popularity' ? 'active' : ''">
              <td>Média de Comentários</td>
              <td>{{$ctrl.selected_cluster.meta_data.comment_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='popular_times' ? 'active' : ''">
              <td>Média de Checkins de Madrugada</td>
              <td>{{$ctrl.selected_cluster.meta_data.dawn_checkin_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='popular_times' ? 'active' : ''">
              <td>Média de Checkins de Manhã</td>
              <td>{{$ctrl.selected_cluster.meta_data.morning_checkin_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='popular_times' ? 'active' : ''">
              <td>Média de Checkins de Tarde</td>
              <td>{{$ctrl.selected_cluster.meta_data.afternoon_checkin_count_avg}}</td>
            </tr>
            <tr ng-class="selected_algorithm=='popular_times' ? 'active' : ''">
              <td>Média de Checkins de Noite</td>
              <td>{{$ctrl.selected_cluster.meta_data.evening_checkin_count_avg}}</td>
            </tr>
          </tbody>
        </table>
      </div>
  <div class="row">
    <div class="col-md-6">
      <p>Selecione o seu Bairro</p>
      <form class="form-inline">
        <select ng-model="selected_neighborhood_name" type="text" autofocus>
          <option ng-repeat="option in $ctrl.neighborhoods" value="{{ option.name }}">{{ option.name }}</option>
        </select>
        <button class="btn" ng-click="$ctrl.triggerNeighborhoods(selected_neighborhood_name, $ctrl)">Selecionar</button>
      </form>
    </div>
  </div>

  <!--form class="thing-form">
    <label>Syncs in realtime across clients</label>
    <p class="input-group">
      <input type="text" class="form-control" placeholder="Add a new thing here." ng-model="$ctrl.newThing">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-primary" ng-click="$ctrl.addThing()">Add New</button>
      </span>
    </p>
  </form-->
</div>
